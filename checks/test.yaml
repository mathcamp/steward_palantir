hello:
  target: "*"
  timeout: 1
  command:
    cmd: echo "hello {{ grains['id'] }}!"
    template: jinja
    timeout: 1

  handlers:
    - log:
    - alert:
      
  schedule:
    seconds: 10

badcheck:
  target: "*"
  timeout: 1
  command:
    cmd: /bin/false

  handlers:
    # Create a separate fork that logs any warning or error
    - fork:
        handlers:
          - absorb:
              success: true
          - log:
    # Then create an alert if the check fails twice in a row
    - absorb:
        count: 2
        success: false
    - alert:
        # Log the check if the alert was resolved
        resolve:
          - log:

  schedule:
    seconds: 10
